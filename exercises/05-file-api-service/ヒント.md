# ヒント: エラーハンドリングの欠如

## 問題点

このコードには以下の問題があります：

1. **try-catchの欠如**
   - エラーが発生した際の処理が一切ない
   - アプリケーション全体がクラッシュする可能性

2. **エラーの種類を区別していない**
   - ファイルが存在しないエラー
   - ネットワークエラー
   - JSONパースエラー
   - 全て同じように扱われる（または扱われない）

3. **部分的な失敗への対処がない**
   - バッチ処理で一部が失敗すると全体が止まる
   - どこまで処理が完了したか分からない

4. **エラー情報の欠如**
   - エラーが発生しても、何が原因か分からない
   - ログが残らない

## 改善のポイント

### 1. 適切なtry-catch

```typescript
try {
  // 処理
} catch (error) {
  // エラーハンドリング
}
```

### 2. カスタムエラークラス

```typescript
class FileNotFoundError extends Error {
  constructor(path: string) {
    super(`File not found: ${path}`);
    this.name = 'FileNotFoundError';
  }
}
```

### 3. エラーの種類による処理の分岐

```typescript
if (error instanceof FileNotFoundError) {
  // ファイルが見つからない場合の処理
} else if (error instanceof NetworkError) {
  // ネットワークエラーの処理
}
```

### 4. ロギング

```typescript
logger.error('Failed to process user', { userId, error });
```

### 5. リトライ処理

```typescript
async function withRetry<T>(
  fn: () => Promise<T>,
  maxRetries: number
): Promise<T> {
  // リトライロジック
}
```

## 考えてみよう

- どのようなエラーが発生する可能性がありますか？
- それぞれのエラーに対してどう対処すべきですか？
- バッチ処理の一部が失敗した場合、どうすべきですか？
- エラー情報をどのように記録・通知すべきですか？
